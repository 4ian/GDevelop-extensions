{
  "author": "Bouh",
  "description": "This extension adds conditions to check if an object is located within the visible portion of its layer's camera. The condition also allows for specifying padding to the virtual screen border.\n\nAs each layer has a unique camera, this will only work for the layer that the object is on. This does not take into account any object visibility, such as being hidden or 0 opacity, but can be combined with those existing conditions.\n\nThis uses the object's boundary box for detection, due to this objects with modified origin points may not behave as expected.",
  "extensionNamespace": "",
  "fullName": "Object \"Is On Screen\" Detection",
  "helpPath": "",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLW1vbml0b3Itc2NyZWVuc2hvdCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik05LDZINVYxMEg3VjhIOU0xOSwxMEgxN1YxMkgxNVYxNEgxOU0yMSwxNkgzVjRIMjFNMjEsMkgzQzEuODksMiAxLDIuODkgMSw0VjE2QTIsMiAwIDAsMCAzLDE4SDEwVjIwSDhWMjJIMTZWMjBIMTRWMThIMjFBMiwyIDAgMCwwIDIzLDE2VjRDMjMsMi44OSAyMi4xLDIgMjEsMiIgLz48L3N2Zz4=",
  "name": "IsOnScreenExt",
  "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/monitor-screenshot.svg",
  "shortDescription": "This adds a condition to detect if an object is on screen based off its current layer.",
  "version": "1.1.0",
  "tags": [
    "is on screen",
    "condition",
    "visible",
    "hide",
    "screen"
  ],
  "dependencies": [],
  "eventsFunctions": [
    {
      "description": "Checks if an object's position is within the viewport of its layer.",
      "fullName": "Is on screen",
      "functionType": "Condition",
      "name": "IsOnScreen",
      "private": false,
      "sentence": "_PARAM1_ is on screen of its layer's camera (padded by _PARAM2_ pixels)",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "/*\nGet the object, his layer, convert the position of the object from his layer to the world coordinate.\nGet the point on each side on the object on screen, and compare with the camera/game area.\n\nThis way even if the camera have a rotation or custom scale the object is always compared to the game area.\n*/\n\n// Take the first instance of the object select from function parameter.\nconst object = objects[0];\n\n// Get the layer of the object.\nconst layer = runtimeScene.getLayer(object.getLayer());\n\n// Compute the cameras coordinates with the scale of camera zoom.\nruntimeScene._updateLayersCameraCoordinates(layer.getCameraZoom());\n\n// Get the camera coordinates from the layere where is the object.\nconst cameraCoords = runtimeScene._layersCameraCoordinates[object.getLayer()];\n\n// Get the aabb of the object on his layer.\nconst aabb = object.getVisibilityAABB();\n\n// Get his layer to convert the coordinate of aabb to the world coordinates\nconst topLeft = layer.convertInverseCoords(aabb.min[0], aabb.min[1]);\nconst topRight = layer.convertInverseCoords(aabb.max[0], aabb.min[1]);\nconst bottomRight = layer.convertInverseCoords(aabb.max[0], aabb.max[1]);\nconst bottomLeft = layer.convertInverseCoords(aabb.min[0], aabb.max[1]);\n\n// Get the points on each side of the object on screen.\nconst posLeftObjectOnScreen = Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\nconst posRightObjectOnScreen = Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);\nconst posUpObjectOnScreen = Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);\nconst posDownObjectOnScreen = Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);\n\nconst padding = eventsFunctionContext.getArgument(\"Padding\");\n\n/*\ncameraCoords[0] is X on top left\ncameraCoords[1] is Y on top left\ncameraCoords[2] is X on bottom left\ncameraCoords[3] is Y on bottom left\n*/\nif (\n    !(posLeftObjectOnScreen + padding > cameraCoords[2] ||\n        posUpObjectOnScreen + padding > cameraCoords[3] ||\n        posRightObjectOnScreen + padding < cameraCoords[0] ||\n        posDownObjectOnScreen + padding < cameraCoords[1]\n        )\n) {\n    eventsFunctionContext.returnValue = true;\n}",
          "parameterObjects": "Object",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Select object to check",
          "longDescription": "",
          "name": "Object",
          "optional": false,
          "supplementaryInformation": "",
          "type": "objectList"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Padding in pixels",
          "longDescription": "Number of pixels to pad the screen border. Zero by default. A negative value go inside the screen, a positive value fo outside.",
          "name": "Padding",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        }
      ],
      "objectGroups": [
        {
          "name": "Group",
          "objects": []
        }
      ]
    }
  ],
  "eventsBasedBehaviors": []
}